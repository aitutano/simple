<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Criar Conta - Flow</title>

    <!-- CSS Dependencies -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />

    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Custom CSS -->
    <link href="../assets/css/style.css" rel="stylesheet" />
    <link href="../assets/css/responsive.css" rel="stylesheet" />
  </head>
  <body
    style="
      background: linear-gradient(
        135deg,
        var(--accent-bg) 0%,
        var(--primary-bg) 100%
      );
      min-height: 100vh;
    "
  >
    <!-- Register Container -->
    <div class="container-fluid">
      <div class="row min-vh-100">
        <!-- Left Side - Registration Form -->
        <div
          class="col-lg-6 d-flex align-items-center justify-content-center p-4"
        >
          <div
            class="register-form-container animate__animated animate__fadeInLeft"
            style="width: 100%; max-width: 450px"
          >
            <!-- Mobile Branding -->
            <div class="mobile-brand text-center mb-4 d-lg-none">
              <i
                class="fas fa-tasks"
                style="
                  font-size: 2.5rem;
                  color: var(--primary-red);
                  margin-bottom: 0.5rem;
                "
              ></i>
              <h2 class="fw-bold" style="color: var(--primary-red)">Flow</h2>
              <p class="text-muted">Crie sua conta</p>
            </div>

            <!-- Registration Card -->
            <div
              class="card border-0 shadow-lg"
              style="border-radius: var(--radius-xl)"
            >
              <div class="card-body p-4 p-md-5">
                <div class="text-center mb-4 d-none d-lg-block">
                  <h2 class="fw-bold mb-2">Criar sua conta</h2>
                  <p class="text-muted">
                    Comece a organizar suas tarefas hoje mesmo
                  </p>
                </div>

                <!-- Progress Steps -->
                <div class="progress-steps mb-4">
                  <div
                    class="d-flex justify-content-between align-items-center"
                  >
                    <div class="step active" id="step-1">
                      <div class="step-number">1</div>
                      <small>Dados básicos</small>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" id="step-2">
                      <div class="step-number">2</div>
                      <small>Preferências</small>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" id="step-3">
                      <div class="step-number">3</div>
                      <small>Confirmação</small>
                    </div>
                  </div>
                </div>

                <!-- Registration Form -->
                <form id="register-form" data-validate>
                  <!-- Step 1: Basic Information -->
                  <div class="form-step active" id="form-step-1">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label for="first-name" class="form-label"
                            >Nome *</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="first-name"
                            name="firstName"
                            placeholder="Seu primeiro nome"
                            data-validation="required|minLength:2"
                            autocomplete="given-name"
                          />
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="form-group mb-3">
                          <label for="last-name" class="form-label"
                            >Sobrenome *</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="last-name"
                            name="lastName"
                            placeholder="Seu sobrenome"
                            data-validation="required|minLength:2"
                            autocomplete="family-name"
                          />
                        </div>
                      </div>
                    </div>

                    <div class="form-group mb-3">
                      <label for="email" class="form-label">E-mail *</label>
                      <div class="input-group">
                        <span class="input-group-text">
                          <i class="fas fa-envelope"></i>
                        </span>
                        <input
                          type="email"
                          class="form-control"
                          id="email"
                          name="email"
                          placeholder="seu@email.com"
                          data-validation="required|email"
                          autocomplete="email"
                        />
                      </div>
                    </div>

                    <div class="form-group mb-3">
                      <label for="password" class="form-label">Senha *</label>
                      <div class="input-group">
                        <span class="input-group-text">
                          <i class="fas fa-lock"></i>
                        </span>
                        <input
                          type="password"
                          class="form-control"
                          id="password"
                          name="password"
                          placeholder="Mínimo 6 caracteres"
                          data-validation="required|minLength:6"
                          autocomplete="new-password"
                        />
                        <button
                          class="btn btn-outline-secondary"
                          type="button"
                          id="toggle-password"
                        >
                          <i class="fas fa-eye"></i>
                        </button>
                      </div>
                      <div class="password-strength mt-2">
                        <div class="strength-bar">
                          <div class="strength-indicator"></div>
                        </div>
                        <small class="strength-text text-muted"
                          >Digite uma senha</small
                        >
                      </div>
                    </div>

                    <div class="form-group mb-4">
                      <label for="confirm-password" class="form-label"
                        >Confirmar Senha *</label
                      >
                      <div class="input-group">
                        <span class="input-group-text">
                          <i class="fas fa-lock"></i>
                        </span>
                        <input
                          type="password"
                          class="form-control"
                          id="confirm-password"
                          name="confirmPassword"
                          placeholder="Digite a senha novamente"
                          data-validation="required"
                          autocomplete="new-password"
                        />
                      </div>
                    </div>
                  </div>

                  <!-- Step 2: Preferences -->
                  <div class="form-step" id="form-step-2">
                    <div class="form-group mb-3">
                      <label for="phone" class="form-label">Telefone</label>
                      <div class="input-group">
                        <span class="input-group-text">
                          <i class="fas fa-phone"></i>
                        </span>
                        <input
                          type="tel"
                          class="form-control phone-mask"
                          id="phone"
                          name="phone"
                          placeholder="(11) 99999-9999"
                          autocomplete="tel"
                        />
                      </div>
                    </div>

                    <div class="form-group mb-3">
                      <label for="birth-date" class="form-label"
                        >Data de Nascimento</label
                      >
                      <input
                        type="date"
                        class="form-control"
                        id="birth-date"
                        name="birthDate"
                        autocomplete="bday"
                      />
                    </div>

                    <div class="form-group mb-3">
                      <label class="form-label"
                        >Como você pretende usar o Flow?</label
                      >
                      <div class="usage-options">
                        <div class="form-check mb-2">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="usage"
                            id="usage-personal"
                            value="personal"
                            checked
                          />
                          <label class="form-check-label" for="usage-personal">
                            <i class="fas fa-user me-2"></i>
                            Uso pessoal
                          </label>
                        </div>
                        <div class="form-check mb-2">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="usage"
                            id="usage-work"
                            value="work"
                          />
                          <label class="form-check-label" for="usage-work">
                            <i class="fas fa-briefcase me-2"></i>
                            Trabalho
                          </label>
                        </div>
                        <div class="form-check mb-2">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="usage"
                            id="usage-study"
                            value="study"
                          />
                          <label class="form-check-label" for="usage-study">
                            <i class="fas fa-graduation-cap me-2"></i>
                            Estudos
                          </label>
                        </div>
                        <div class="form-check">
                          <input
                            class="form-check-input"
                            type="radio"
                            name="usage"
                            id="usage-mixed"
                            value="mixed"
                          />
                          <label class="form-check-label" for="usage-mixed">
                            <i class="fas fa-layer-group me-2"></i>
                            Misto (pessoal + trabalho/estudos)
                          </label>
                        </div>
                      </div>
                    </div>

                    <div class="form-group mb-4">
                      <label class="form-label"
                        >Preferências de notificação</label
                      >
                      <div class="notification-preferences">
                        <div class="form-check form-switch mb-2">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            id="notifications-email"
                            name="notificationsEmail"
                            checked
                          />
                          <label
                            class="form-check-label"
                            for="notifications-email"
                          >
                            E-mail de lembretes
                          </label>
                        </div>
                        <div class="form-check form-switch mb-2">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            id="notifications-browser"
                            name="notificationsBrowser"
                            checked
                          />
                          <label
                            class="form-check-label"
                            for="notifications-browser"
                          >
                            Notificações do navegador
                          </label>
                        </div>
                        <div class="form-check form-switch">
                          <input
                            class="form-check-input"
                            type="checkbox"
                            id="notifications-newsletter"
                            name="notificationsNewsletter"
                          />
                          <label
                            class="form-check-label"
                            for="notifications-newsletter"
                          >
                            Newsletter com dicas de produtividade
                          </label>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- Step 3: Confirmation -->
                  <div class="form-step" id="form-step-3">
                    <div class="confirmation-content text-center">
                      <div class="confirmation-icon mb-3">
                        <i
                          class="fas fa-user-check"
                          style="font-size: 3rem; color: var(--success-green)"
                        ></i>
                      </div>
                      <h4 class="fw-bold mb-3">Quase pronto!</h4>
                      <p class="text-muted mb-4">
                        Revise suas informações e aceite os termos para
                        finalizar o cadastro.
                      </p>

                      <div
                        class="summary-info p-3 mb-4"
                        style="
                          background: var(--primary-bg);
                          border-radius: var(--radius-md);
                        "
                      >
                        <div
                          class="d-flex align-items-center justify-content-between mb-2"
                        >
                          <span class="text-muted">Nome:</span>
                          <span class="fw-medium" id="summary-name">-</span>
                        </div>
                        <div
                          class="d-flex align-items-center justify-content-between mb-2"
                        >
                          <span class="text-muted">E-mail:</span>
                          <span class="fw-medium" id="summary-email">-</span>
                        </div>
                        <div
                          class="d-flex align-items-center justify-content-between"
                        >
                          <span class="text-muted">Uso:</span>
                          <span class="fw-medium" id="summary-usage">-</span>
                        </div>
                      </div>
                    </div>

                    <div class="form-group mb-4">
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="terms"
                          name="terms"
                          data-validation="required"
                        />
                        <label class="form-check-label" for="terms">
                          Eu aceito os
                          <a
                            href="#"
                            data-bs-toggle="modal"
                            data-bs-target="#termsModal"
                            >Termos de Uso</a
                          >
                          e a
                          <a
                            href="#"
                            data-bs-toggle="modal"
                            data-bs-target="#privacyModal"
                            >Política de Privacidade</a
                          >
                          *
                        </label>
                      </div>
                    </div>

                    <div class="form-group mb-4">
                      <div class="form-check">
                        <input
                          class="form-check-input"
                          type="checkbox"
                          id="marketing"
                          name="marketing"
                        />
                        <label class="form-check-label" for="marketing">
                          Quero receber ofertas especiais e novidades por e-mail
                        </label>
                      </div>
                    </div>
                  </div>

                  <!-- Navigation Buttons -->
                  <div class="form-navigation">
                    <div class="d-flex justify-content-between">
                      <button
                        type="button"
                        class="btn btn-outline-secondary"
                        id="prev-step"
                        style="display: none"
                      >
                        <i class="fas fa-arrow-left me-2"></i>
                        Anterior
                      </button>
                      <div class="ms-auto">
                        <button
                          type="button"
                          class="btn btn-primary-custom"
                          id="next-step"
                        >
                          Próximo
                          <i class="fas fa-arrow-right ms-2"></i>
                        </button>
                        <button
                          type="submit"
                          class="btn btn-primary-custom"
                          id="submit-form"
                          style="display: none"
                        >
                          <i class="fas fa-user-plus me-2"></i>
                          Criar Conta
                        </button>
                      </div>
                    </div>
                  </div>
                </form>

                <!-- Social Registration -->
                <div class="social-register mt-4" id="social-section">
                  <div class="text-center mb-3">
                    <div class="divider">
                      <span class="divider-text text-muted"
                        >ou cadastre-se com</span
                      >
                    </div>
                  </div>

                  <div class="d-grid gap-2">
                    <button
                      class="btn btn-outline-secondary"
                      type="button"
                      onclick="registerWithGoogle()"
                    >
                      <i class="fab fa-google me-2" style="color: #4285f4"></i>
                      Google
                    </button>
                    <button
                      class="btn btn-outline-secondary"
                      type="button"
                      onclick="registerWithGithub()"
                    >
                      <i class="fab fa-github me-2"></i>
                      GitHub
                    </button>
                  </div>
                </div>

                <div class="text-center mt-4">
                  <p class="text-muted mb-0">
                    Já tem uma conta?
                    <a href="login.html" class="text-decoration-none fw-medium"
                      >Fazer login</a
                    >
                  </p>
                </div>
              </div>
            </div>

            <!-- Back to Landing -->
            <div class="text-center mt-3">
              <a href="../landing.html" class="text-muted text-decoration-none">
                <i class="fas fa-arrow-left me-1"></i>
                Voltar para o início
              </a>
            </div>
          </div>
        </div>

        <!-- Right Side - Benefits -->
        <div
          class="col-lg-6 d-none d-lg-flex align-items-center justify-content-center"
          style="
            background: linear-gradient(
              135deg,
              var(--info-blue) 0%,
              #2980b9 100%
            );
          "
        >
          <div
            class="text-center text-white animate__animated animate__fadeInRight"
          >
            <div class="benefits-content">
              <h2 class="display-5 fw-bold mb-4">
                Junte-se a milhares de usuários
              </h2>
              <p class="lead mb-5 opacity-90">
                Transforme sua produtividade com o Flow
              </p>

              <div class="benefits-list">
                <div class="benefit-item mb-4">
                  <div class="benefit-icon mb-3">
                    <i class="fas fa-rocket" style="font-size: 2.5rem"></i>
                  </div>
                  <h4 class="fw-bold mb-2">Comece rapidamente</h4>
                  <p class="opacity-90">
                    Configure sua conta em menos de 2 minutos e comece a
                    organizar suas tarefas imediatamente.
                  </p>
                </div>

                <div class="benefit-item mb-4">
                  <div class="benefit-icon mb-3">
                    <i class="fas fa-shield-alt" style="font-size: 2.5rem"></i>
                  </div>
                  <h4 class="fw-bold mb-2">Dados seguros</h4>
                  <p class="opacity-90">
                    Suas informações são protegidas com criptografia de ponta e
                    backups automáticos.
                  </p>
                </div>

                <div class="benefit-item">
                  <div class="benefit-icon mb-3">
                    <i class="fas fa-heart" style="font-size: 2.5rem"></i>
                  </div>
                  <h4 class="fw-bold mb-2">Suporte incrível</h4>
                  <p class="opacity-90">
                    Nossa equipe está sempre pronta para ajudar você a
                    aproveitar ao máximo o Flow.
                  </p>
                </div>
              </div>

              <div
                class="testimonial mt-5 p-4"
                style="
                  background: rgba(255, 255, 255, 0.1);
                  border-radius: var(--radius-lg);
                "
              >
                <blockquote class="mb-3">
                  "O Flow mudou completamente como eu organizo minha vida.
                  Recomendo para todos!"
                </blockquote>
                <footer class="blockquote-footer">
                  <strong>Maria Silva</strong>, Estudante de Engenharia
                </footer>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Terms Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Termos de Uso</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body" style="max-height: 400px; overflow-y: auto">
            <h6>1. Aceitação dos Termos</h6>
            <p>Ao usar o Flow, você concorda com estes termos de uso.</p>

            <h6>2. Descrição do Serviço</h6>
            <p>
              O Flow é uma aplicação web para gerenciamento de tarefas pessoais.
            </p>

            <h6>3. Conta do Usuário</h6>
            <p>
              Você é responsável por manter a segurança de sua conta e senha.
            </p>

            <h6>4. Uso Aceitável</h6>
            <p>
              Você concorda em usar o serviço apenas para fins legais e
              apropriados.
            </p>

            <h6>5. Privacidade</h6>
            <p>
              Respeitamos sua privacidade conforme descrito em nossa Política de
              Privacidade.
            </p>

            <h6>6. Modificações</h6>
            <p>
              Podemos modificar estes termos a qualquer momento, notificando os
              usuários.
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Fechar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Privacy Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Política de Privacidade</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body" style="max-height: 400px; overflow-y: auto">
            <h6>1. Informações Coletadas</h6>
            <p>
              Coletamos apenas as informações necessárias para fornecer nossos
              serviços.
            </p>

            <h6>2. Uso das Informações</h6>
            <p>
              Suas informações são usadas para melhorar sua experiência no Flow.
            </p>

            <h6>3. Compartilhamento</h6>
            <p>
              Não compartilhamos suas informações pessoais com terceiros sem seu
              consentimento.
            </p>

            <h6>4. Segurança</h6>
            <p>
              Implementamos medidas de segurança para proteger suas informações.
            </p>

            <h6>5. Cookies</h6>
            <p>
              Usamos cookies para melhorar a funcionalidade e experiência do
              usuário.
            </p>

            <h6>6. Seus Direitos</h6>
            <p>
              Você pode acessar, atualizar ou excluir suas informações a
              qualquer momento.
            </p>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Fechar
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- JavaScript Dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

    <!-- Custom JavaScript -->
    <script src="../assets/js/app.js"></script>

    <!-- Register Page Scripts -->
    <script>
      let currentStep = 1;
      const totalSteps = 3;

      document.addEventListener("DOMContentLoaded", function () {
        setupRegisterForm();
        setupPasswordStrength();
        setupStepNavigation();
        setupPasswordToggle();
      });

      function setupRegisterForm() {
        const form = document.getElementById("register-form");

        form.addEventListener("submit", async (e) => {
          e.preventDefault();

          if (validation.validateForm(form)) {
            const formData = new FormData(form);
            const registerData = Object.fromEntries(formData.entries());

            // Check password confirmation
            if (registerData.password !== registerData.confirmPassword) {
              utils.showNotification("As senhas não coincidem", "danger");
              return;
            }

            try {
              const button = form.querySelector('button[type="submit"]');
              const originalText = button.innerHTML;

              // Show loading state
              button.innerHTML =
                '<i class="fas fa-spinner fa-spin me-2"></i>Criando conta...';
              button.disabled = true;

              // Simulate registration API call
              await simulateRegistration(registerData);

              // Success - redirect to login
              utils.showNotification(
                "Conta criada com sucesso! Faça login para continuar.",
                "success",
              );

              setTimeout(() => {
                window.location.href = "login.html";
              }, 2000);
            } catch (error) {
              console.error("Registration error:", error);
              utils.showNotification(
                "Erro ao criar conta. Tente novamente.",
                "danger",
              );

              // Reset button
              const button = form.querySelector('button[type="submit"]');
              button.innerHTML =
                '<i class="fas fa-user-plus me-2"></i>Criar Conta';
              button.disabled = false;
            }
          }
        });
      }

      function setupPasswordStrength() {
        const passwordInput = document.getElementById("password");
        const strengthBar = document.querySelector(".strength-indicator");
        const strengthText = document.querySelector(".strength-text");

        passwordInput.addEventListener("input", function () {
          const password = this.value;
          const strength = calculatePasswordStrength(password);

          strengthBar.className = `strength-indicator strength-${strength.level}`;
          strengthBar.style.width = `${strength.percentage}%`;
          strengthText.textContent = strength.text;
          strengthText.className = `strength-text text-${strength.color}`;
        });
      }

      function calculatePasswordStrength(password) {
        let score = 0;
        let feedback = [];

        if (password.length >= 6) score += 1;
        if (password.length >= 8) score += 1;
        if (/[a-z]/.test(password)) score += 1;
        if (/[A-Z]/.test(password)) score += 1;
        if (/[0-9]/.test(password)) score += 1;
        if (/[^A-Za-z0-9]/.test(password)) score += 1;

        const levels = [
          {
            level: "weak",
            percentage: 20,
            text: "Muito fraca",
            color: "danger",
          },
          { level: "fair", percentage: 40, text: "Fraca", color: "warning" },
          { level: "good", percentage: 60, text: "Boa", color: "info" },
          { level: "strong", percentage: 80, text: "Forte", color: "success" },
          {
            level: "very-strong",
            percentage: 100,
            text: "Muito forte",
            color: "success",
          },
        ];

        const index = Math.min(score - 1, levels.length - 1);
        return index >= 0
          ? levels[index]
          : {
              level: "weak",
              percentage: 0,
              text: "Digite uma senha",
              color: "muted",
            };
      }

      function setupStepNavigation() {
        const nextBtn = document.getElementById("next-step");
        const prevBtn = document.getElementById("prev-step");
        const submitBtn = document.getElementById("submit-form");

        nextBtn.addEventListener("click", () => {
          if (validateCurrentStep()) {
            if (currentStep < totalSteps) {
              currentStep++;
              updateStep();
            }
          }
        });

        prevBtn.addEventListener("click", () => {
          if (currentStep > 1) {
            currentStep--;
            updateStep();
          }
        });
      }

      function validateCurrentStep() {
        const currentStepForm = document.getElementById(
          `form-step-${currentStep}`,
        );
        const fields = currentStepForm.querySelectorAll("[data-validation]");
        let isValid = true;

        fields.forEach((field) => {
          const rules = field.dataset.validation.split("|");
          const errors = validation.validateField(field, rules);
          validation.showFieldErrors(field, errors);

          if (errors.length > 0) {
            isValid = false;
          }
        });

        // Special validation for password confirmation
        if (currentStep === 1) {
          const password = document.getElementById("password").value;
          const confirmPassword =
            document.getElementById("confirm-password").value;

          if (password && confirmPassword && password !== confirmPassword) {
            const confirmField = document.getElementById("confirm-password");
            validation.showFieldErrors(confirmField, [
              "As senhas não coincidem",
            ]);
            isValid = false;
          }
        }

        return isValid;
      }

      function updateStep() {
        // Update step indicators
        document.querySelectorAll(".step").forEach((step, index) => {
          step.classList.toggle("active", index + 1 <= currentStep);
          step.classList.toggle("completed", index + 1 < currentStep);
        });

        // Update form steps
        document.querySelectorAll(".form-step").forEach((step, index) => {
          step.classList.toggle("active", index + 1 === currentStep);
        });

        // Update navigation buttons
        const nextBtn = document.getElementById("next-step");
        const prevBtn = document.getElementById("prev-step");
        const submitBtn = document.getElementById("submit-form");
        const socialSection = document.getElementById("social-section");

        prevBtn.style.display = currentStep > 1 ? "block" : "none";
        nextBtn.style.display = currentStep < totalSteps ? "block" : "none";
        submitBtn.style.display = currentStep === totalSteps ? "block" : "none";
        socialSection.style.display = currentStep === 1 ? "block" : "none";

        // Update summary on last step
        if (currentStep === totalSteps) {
          updateSummary();
        }
      }

      function updateSummary() {
        const firstName = document.getElementById("first-name").value;
        const lastName = document.getElementById("last-name").value;
        const email = document.getElementById("email").value;
        const usage = document.querySelector(
          'input[name="usage"]:checked',
        ).value;

        const usageLabels = {
          personal: "Uso pessoal",
          work: "Trabalho",
          study: "Estudos",
          mixed: "Misto",
        };

        document.getElementById("summary-name").textContent =
          `${firstName} ${lastName}`;
        document.getElementById("summary-email").textContent = email;
        document.getElementById("summary-usage").textContent =
          usageLabels[usage];
      }

      function setupPasswordToggle() {
        const toggleButton = document.getElementById("toggle-password");
        const passwordInput = document.getElementById("password");

        toggleButton.addEventListener("click", function () {
          const type =
            passwordInput.getAttribute("type") === "password"
              ? "text"
              : "password";
          passwordInput.setAttribute("type", type);

          const icon = this.querySelector("i");
          icon.className =
            type === "password" ? "fas fa-eye" : "fas fa-eye-slash";
        });
      }

      async function simulateRegistration(registerData) {
        // Simulate API call delay
        await new Promise((resolve) => setTimeout(resolve, 2000));

        // Check if email already exists (simulate)
        const existingEmails = ["admin@flow.com", "test@example.com"];
        if (existingEmails.includes(registerData.email)) {
          throw new Error("Email already exists");
        }

        // Store user data (in real app, this would be sent to backend)
        const userData = {
          id: Date.now(),
          firstName: registerData.firstName,
          lastName: registerData.lastName,
          email: registerData.email,
          phone: registerData.phone,
          birthDate: registerData.birthDate,
          usage: registerData.usage,
          preferences: {
            notificationsEmail: registerData.notificationsEmail === "on",
            notificationsBrowser: registerData.notificationsBrowser === "on",
            notificationsNewsletter:
              registerData.notificationsNewsletter === "on",
            marketing: registerData.marketing === "on",
          },
          createdAt: new Date().toISOString(),
        };

        console.log("User registered:", userData);
      }

      function registerWithGoogle() {
        utils.showNotification(
          "Registro com Google será implementado em breve!",
          "info",
        );
      }

      function registerWithGithub() {
        utils.showNotification(
          "Registro com GitHub será implementado em breve!",
          "info",
        );
      }
    </script>

    <style>
      .progress-steps {
        margin-bottom: 2rem;
      }

      .step {
        text-align: center;
        flex: 1;
      }

      .step-number {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--border-color);
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 0.5rem;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .step.active .step-number {
        background: var(--primary-red);
        color: white;
      }

      .step.completed .step-number {
        background: var(--success-green);
        color: white;
      }

      .step-line {
        height: 2px;
        background: var(--border-color);
        flex: 1;
        margin: 20px 1rem 0 1rem;
      }

      .step.completed + .step-line {
        background: var(--success-green);
      }

      .form-step {
        display: none;
      }

      .form-step.active {
        display: block;
      }

      .password-strength {
        margin-top: 0.5rem;
      }

      .strength-bar {
        height: 4px;
        background: var(--border-color);
        border-radius: 2px;
        overflow: hidden;
      }

      .strength-indicator {
        height: 100%;
        transition: all 0.3s ease;
        border-radius: 2px;
      }

      .strength-weak {
        background: #dc3545;
      }
      .strength-fair {
        background: #fd7e14;
      }
      .strength-good {
        background: #ffc107;
      }
      .strength-strong {
        background: #20c997;
      }
      .strength-very-strong {
        background: #198754;
      }

      .usage-options .form-check-label {
        font-weight: 500;
        padding: 0.5rem 0;
      }

      .notification-preferences .form-check {
        padding: 0.5rem 0;
      }

      .divider {
        position: relative;
        text-align: center;
        margin: 1rem 0;
      }

      .divider::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        height: 1px;
        background: var(--border-color);
      }

      .divider-text {
        background: white;
        padding: 0 1rem;
        font-size: 0.875rem;
        position: relative;
        z-index: 1;
      }

      .input-group-text {
        background: var(--primary-bg);
        border-color: var(--border-color);
        color: var(--text-secondary);
      }

      @media (max-width: 991px) {
        .min-vh-100 {
          min-height: auto;
          padding: 2rem 0;
        }

        .progress-steps {
          margin-bottom: 1.5rem;
        }

        .step {
          font-size: 0.875rem;
        }

        .step-number {
          width: 32px;
          height: 32px;
          font-size: 0.875rem;
        }
      }
    </style>
  </body>
</html>
